<div class="container-xxl position-relative bg-white d-flex p-0">
    <!-- Spinner Start -->
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->


    <!-- Sidebar Start -->
    <div class="sidebar pe-4 pb-3">
        <nav class="navbar bg-light navbar-light">
            <a href="index.html" class="navbar-brand mx-4 mb-3">
                <h2> <span class="text-primary font-weight-bold border px-3 mr-1">V</span> voicedots.</h2>
            </a>
            <div class="d-flex align-items-center ms-4 mb-4">
                <div class="position-relative">
                    
                    <div
                        class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1">
                    </div>
                </div>
                <div class="ms-3">
                    <h6 class="mb-0">Fareedha</h6>
                    <span>Admin</span>
                </div>
            </div>
            <div class="navbar-nav w-100">
                <a href="index.html" class="nav-item nav-link active"><i
                        class="fa fa-tachometer-alt me-2"></i>Dashboard</a>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i
                            class="fa fa-laptop me-2"></i>Banners</a>
                    <div class="dropdown-menu bg-transparent border-0">
                        <a href="/admin/view-banner" class="dropdown-item">View Banners</a>
                        <a href="/admin/add-banner" class="dropdown-item">Add Banner</a>




                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fa fa-boxes me-2"></i>
                        Coupons</a>
                    <div class="dropdown-menu bg-transparent border-0">
                        <a href="/admin/view-coupons" class="dropdown-item">View coupon</a>
                        <a href="/admin/add-coupon" class="dropdown-item">Add coupon</a>


                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"> 
                        <i class="fa fa-user me-2"></i>User</a>
                    <div class="dropdown-menu bg-transparent border-0">
                        <a href="/admin/view-users" class="dropdown-item">View Users</a>



                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                        <i class="fas fa-clipboard-list me-2"></i>
                            Orders</a>
                    <div class="dropdown-menu bg-transparent border-0">
                        <a href="/admin/view-order" class="dropdown-item">View Orders</a>

                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="fa fa-boxes me-2"></i>Category</a>
                    <div class="dropdown-menu bg-transparent border-0">
                        <a href="/admin/view-category" class="dropdown-item">View category</a>
                        <a href="/admin/add-category" class="dropdown-item">Add category</a>


                    </div>
                </div>
<div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"> 
                        <i class="fa fa-user me-2"></i>Report</a>
                    <div class="dropdown-menu bg-transparent border-0">
                        <a href="/admin/report" class="dropdown-item">View Report</a>



                    </div>
                </div>

                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="fas fa-shopping-cart
                          me-2  "></i>
                            Products</a>
                    <div class="dropdown-menu bg-transparent border-0">
                        <a href="/admin/view-product" class="dropdown-item">View Products</a>
                        <a href="/admin/add-product" class="dropdown-item">Add Products</a>




                    </div>
                </div>
            </div>




    </div>
    </nav>
</div>
<!-- Sidebar End -->


<!-- Content Start -->
<div class="content">
    <!-- Navbar Start -->
    <nav class="navbar navbar-expand bg-light navbar-light sticky-top px-4 py-0">
<div class="navbar-nav align-item-center ms-auto">
        <div class="nav-item dropdown ">
            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                {{!-- <img class="rounded-circle me-lg-2" src="adminassets/img/user.jpg" alt=""
                    style="width: 40px; height: 40px;"> --}}
                <span class="d-none d-lg-inline-flex ">Fareedha</span>
            </a>
            <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">

                <a href="/admin//adminlogout" class="dropdown-item">Log Out</a>
            </div>
        </div>
        </div>
    </nav>


    <!-- Navbar End -->


    <!-- Sale & Revenue Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <div class="col-sm-6 col-xl-3">
                <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">

                    <i class="fa fa-user fa-3x text-primary"></i>


                    <div class="ms-3">
                        <p class="mb-2">Total users</p>
                        <h6 class="mb-0">{{totalUser}}</h6>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-xl-3">
                <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">

                    <i class="fas fa-clipboard-list fa-3x text-primary"></i>
                    <div class="ms-3">
                        <p class="mb-2">Total Products</p>
                        <h6 class="mb-0">{{totalproducts}}</h6>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-xl-3">
                <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">

                    <i class="fa fa-boxes fa-3x text-primary"></i>
                    {{!-- <i class="fas fa-dollar-sign fa-3x text-primary"></i> --}}
                    <div class="ms-3">
                        <p class="mb-2">Total Orders</p>
                        <h6 class="mb-0">{{totalOrder}}</h6>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-xl-3">
                <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                    {{!-- <i class="fas fa-shopping-cart
                            fa-3x text-primary"></i> --}}
                    <i class="fas fa-shopping-cart
                            fa-3x text-primary"></i>
                    {{!-- <i class="fas fa-calendar fa-2x text-gray-300"></i>
                    <i class="fas fa-circle text-primary"></i>
                    <i class="fas fa-circle text-success"></i> --}}
                    {{!-- <i class="fas fa-truck-arrow-right fa-3x text-primary"></i> --}}
                    {{!-- <i class="fas fa-shopping-cart-circle-check"></i> --}}
                    <div class="ms-3">
                        <p class="mb-2">Total shipped </p>
                        <h6 class="mb-0">{{shipped }}</h6>
                    </div>
                </div>

            </div>
        </div>
        <br>
        <div class="row g-4">
            <div class="col-sm-6 col-xl-3">
                <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                    {{!-- <i class="fas fa-chart-line
                            fa-3x text-primary"></i> --}}
                    <i class="fas fa-dollar-sign fa-3x text-primary"></i>
                    <div class="ms-3">
                        <p class="mb-2">Todays Revenue</p>
                        <h6 class="mb-0"> Rs. {{todayrevenue }}</h6>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-xl-3">
                <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                    <i class="fa fa-chart-bar fa-3x text-primary"></i>
                    <div class="ms-3">
                        <p class="mb-2">Todays Sales </p>
                        <h6 class="mb-0">{{todaysale }}</h6>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-xl-3">
                <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                    <i class="fa fa-chart-area fa-3x text-primary"></i>
                    <div class="ms-3">
                        <p class="mb-2">Total Sales</p>
                        <h6 class="mb-0">{{totalsale }}</h6>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-xl-3">
                <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                    <i class="fa fa-chart-pie fa-3x text-primary"></i>
                    <div class="ms-3">
                        <p class="mb-2">Total Revenue</p>
                        <h6 class="mb-0"> Rs.{{ totalrevenue}}</h6>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- Sale & Revenue End -->


    <!-- Sales Chart Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <div class="col-sm-12 col-xl-6">
                <div class="bg-light text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0"> Sales Chart</h6>
                        <a href=""></a>
                    </div>
                    <canvas id="myChart" style="width:100%;max-width:600px; height: 422px;"></canvas>
                </div>
            </div>
            <div class="col-sm-12 col-xl-6">
                <div class="bg-light text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">order Status</h6>
                        <a href=""></a>
                    </div>
                    <canvas id="myChart1"></canvas>
                </div>
            </div>
        </div>
    </div>
    <!-- Sales Chart End -->


    <!-- Recent Sales Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="bg-light text-center rounded p-4">
            <div class="d-flex align-items-center justify-content-between mb-4">
                <h6 class="mb-0">Recent Sales</h6>
                <a href="">Show All</a>
            </div>
            <div class="table-responsive">
                <table class="table text-start align-middle table-bordered table-hover mb-0">
                    <thead>
                        <tr class="text-dark">

                            <th scope="col">Date</th>

                            <th scope="col">Customer</th>
                            <th scope="col">Product</th>
                            <th scope="col">Amount</th>
                            <th scope="col">PaymentMode</th>

                        </tr>
                    </thead>
                    <tbody>{{#each recentOrders}}
                        <tr>
                            <td>{{this.orderDate}}</td>
                            <td>{{this.user.name}}</td>
                            <td> {{#each this.product.productimage}}
                                {{#if @first}}

                                <div class="align-middle"> <img src="/images/productimg/{{this}}" alt=""
                                        style="width: 50px;"> </div> {{/if}}
                                {{/each}}

                                <h6>{{this.product.productname}}</h6>
                            </td>
                            <td>{{this.product.productprice}}</td>
                            <td>{{this.paymentDetails}}</td>

                        </tr>
                        {{!-- <tr>
                            <td><input class="form-check-input" type="checkbox"></td>
                            <td>01 Jan 2045</td>
                            <td>INV-0123</td>
                            <td>Jhon Doe</td>
                            <td>$123</td>
                            <td>Paid</td>
                            <td><a class="btn btn-sm btn-primary" href="">Detail</a></td>
                        </tr>
                        <tr>
                            <td><input class="form-check-input" type="checkbox"></td>
                            <td>01 Jan 2045</td>
                            <td>INV-0123</td>
                            <td>Jhon Doe</td>
                            <td>$123</td>
                            <td>Paid</td>
                            <td><a class="btn btn-sm btn-primary" href="">Detail</a></td>
                        </tr>
                        <tr>
                            <td><input class="form-check-input" type="checkbox"></td>
                            <td>01 Jan 2045</td>
                            <td>INV-0123</td>
                            <td>Jhon Doe</td>
                            <td>$123</td>
                            <td>Paid</td>
                            <td><a class="btn btn-sm btn-primary" href="">Detail</a></td>
                        </tr>
                        <tr>
                            <td><input class="form-check-input" type="checkbox"></td>
                            <td>01 Jan 2045</td>
                            <td>INV-0123</td>
                            <td>Jhon Doe</td>
                            <td>$123</td>
                            <td>Paid</td>
                            <td><a class="btn btn-sm btn-primary" href="">Detail</a></td>
                        </tr> --}}
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- Recent Sales End -->


    <!-- Widgets Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            {{!-- <div class="col-sm-12 col-md-6 col-xl-4">
                <div class="h-100 bg-light rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <h6 class="mb-0">Messages</h6>
                        <a href="">Show All</a>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-3">
                        <img class="rounded-circle flex-shrink-0" src="adminassets/img/user.jpg" alt=""
                            style="width: 40px; height: 40px;">
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-0">Jhon Doe</h6>
                                <small>15 minutes ago</small>
                            </div>
                            <span>Short message goes here...</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-3">
                        <img class="rounded-circle flex-shrink-0" src="adminassets/img/user.jpg" alt=""
                            style="width: 40px; height: 40px;">
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-0">Jhon Doe</h6>
                                <small>15 minutes ago</small>
                            </div>
                            <span>Short message goes here...</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-3">
                        <img class="rounded-circle flex-shrink-0" src="adminassets/img/user.jpg" alt=""
                            style="width: 40px; height: 40px;">
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-0">Jhon Doe</h6>
                                <small>15 minutes ago</small>
                            </div>
                            <span>Short message goes here...</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center pt-3">
                        <img class="rounded-circle flex-shrink-0" src="adminassets/img/user.jpg" alt=""
                            style="width: 40px; height: 40px;">
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-0">Jhon Doe</h6>
                                <small>15 minutes ago</small>
                            </div>
                            <span>Short message goes here...</span>
                        </div>
                    </div>
                </div>
            </div> --}}
            <div class="col-sm-12 col-md-6 col-xl-12">
                <div class="h-100 bg-light rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">Calender</h6>
                        <a href="">Show All</a>
                    </div>
                    <div id="calender"></div>
                </div>
            </div>
            {{!-- <div class="col-sm-12 col-md-6 col-xl-4">
                <div class="h-100 bg-light rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">To Do List</h6>
                        <a href="">Show All</a>
                    </div>
                    <div class="d-flex mb-2">
                        <input class="form-control bg-transparent" type="text" placeholder="Enter task">
                        <button type="button" class="btn btn-primary ms-2">Add</button>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-2">
                        <input class="form-check-input m-0" type="checkbox">
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 align-items-center justify-content-between">
                                <span>Short task goes here...</span>
                                <button class="btn btn-sm"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-2">
                        <input class="form-check-input m-0" type="checkbox">
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 align-items-center justify-content-between">
                                <span>Short task goes here...</span>
                                <button class="btn btn-sm"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-2">
                        <input class="form-check-input m-0" type="checkbox" checked>
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 align-items-center justify-content-between">
                                <span><del>Short task goes here...</del></span>
                                <button class="btn btn-sm text-primary"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-2">
                        <input class="form-check-input m-0" type="checkbox">
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 align-items-center justify-content-between">
                                <span>Short task goes here...</span>
                                <button class="btn btn-sm"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex align-items-center pt-2">
                        <input class="form-check-input m-0" type="checkbox">
                        <div class="w-100 ms-3">
                            <div class="d-flex w-100 align-items-center justify-content-between">
                                <span>Short task goes here...</span>
                                <button class="btn btn-sm"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                    </div>
                </div> --}}
            {{!-- </div> --}}
        </div>
    </div>
    <!-- Widgets End -->


    {{!-- <!-- Footer Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="bg-light rounded-top p-4">
            <div class="row">
                <div class="col-12 col-sm-6 text-center text-sm-start">
                    &copy; <a href="#">Your Site Name</a>, All Right Reserved.
                </div>
                <div class="col-12 col-sm-6 text-center text-sm-end">
                    <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
                    Designed By <a href="https://htmlcodex.com">HTML Codex</a>
                    </br>
                    Distributed By <a class="border-bottom" href="https://themewagon.com" target="_blank">ThemeWagon</a>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End --> --}}
</div>
<!-- Content End -->


<!-- Back to Top -->
<a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
</div>
 <script>
    document.addEventListener("DOMContentLoaded", charts, false)

    async function charts() {
        const res = await axios.get('/admin/chart1').then((e) => {
            console.log(e.data.orders +"yyyyyy")

            {{!-- var result = [];
            e.data.orders.reduce(function (acc, curr) {
                if (!acc[curr.orderDate.slice(0, 10)]) {

                    acc[curr.orderDate.slice(0, 10)] = { date: curr.orderDate.slice(0, 10), totalPrice: 0 };
                    result.push(acc[curr.orderDate.slice(0, 10)])
                }
                acc[curr.orderDate.slice(0, 10)].totalPrice += parseInt(curr.totalPrice)

                return acc
            }, {});

            console.log(result)--}}

            var xValues = [];
            var yValues = []; 

            e.data.orders.map((item) => {
                xValues.unshift(item._id[0])
                yValues.unshift(item.totalPrice
)

            })


            console.log(xValues, yValues)

            new Chart("myChart", {
                type: "bar",
                data: {
                    labels: xValues,
                    datasets: [{
                        label:xValues,
                        barThickness:60,
                        
                        fill: false,
                        lineTension: 0,
                        backgroundColor: "#696CFF",
                        borderColor: "#696CFF",
                        data: yValues
                    }
                    ]
                },
                options: {
                    legend: { display: false },
                    scales: {
                        yAxes: [{ ticks: { min: 100, max: 500000 } }],
                    }
                }
            });


        })
    }

</script>

<script>
      document.addEventListener("DOMContentLoaded", charts, false)
      async function charts() {
        const res = await axios.get('/admin/chart2').then((e) => {
            console.log(e,"eeee")
      const value=[e.data.orders.shipped,e.data.orders.Placed,e.data.orders.delivered]

    var ctx = document.getElementById('myChart1').getContext('2d');
    
    var myChart1 = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['Placed', 'delivered','shipped'],
            datasets: [{
                label: 'payment methods',
                data: value,
                backgroundColor: [
             
                    ' #D19C97',
                    ' #009CFF',
                     '#00FFFF'
                ],
            }]

        },
        options: {
            responsive: true,
        },
    })
        })
        }
</script>
